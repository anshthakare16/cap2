<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polytechnic Capstone Portal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container" id="app">
        <!-- Welcome Page -->
        <div id="welcome-page" class="page active">
            <div class="welcome-container">
                <h1>Welcome to Polytechnic Capstone Portal</h1>
                <h2>Computer Engineering Department</h2>
                <p>Form your capstone project teams and select mentors for an amazing final year experience</p>
                <div class="welcome-options">
                    <button class="btn btn--primary btn--lg" onclick="showPage('team-registration')">
                        Team Registration
                    </button>
                    <button class="btn btn--secondary btn--lg" onclick="showPage('admin-login')">
                        Administrator
                    </button>
                </div>
            </div>
        </div>

        <!-- Team Registration - Step 1: Team Details -->
        <div id="team-registration" class="page">
            <div class="form-container">
                <div class="form-header">
                    <h2>Team Formation - Step 1</h2>
                    <div class="progress-bar">
                        <div class="progress-step active">1</div>
                        <div class="progress-step">2</div>
                        <div class="progress-step">3</div>
                    </div>
                    <p>Create your team by selecting members from different departments</p>
                </div>
                
                <form id="team-details-form">
                    <div class="form-group">
                        <label class="form-label" for="team-name">Team Name *</label>
                        <input type="text" id="team-name" class="form-control" required 
                               placeholder="Enter a creative team name">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="team-leader">Team Leader *</label>
                        <select id="team-leader" class="form-control" required>
                            <option value="">Select Team Leader</option>
                        </select>
                        <small class="form-help">The team leader can be from any department</small>
                    </div>

                    <div class="member-selection">
                        <h4>Additional Team Members</h4>
                        
                        <!-- Member 2 -->
                        <div class="member-group">
                            <h5>Team Member 2 *</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="member-2-dept">Department</label>
                                    <select id="member-2-dept" class="form-control" required>
                                        <option value="">Select Department</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="member-2">Student</label>
                                    <select id="member-2" class="form-control" required disabled>
                                        <option value="">Select Student</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Member 3 -->
                        <div class="member-group">
                            <h5>Team Member 3 *</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="member-3-dept">Department</label>
                                    <select id="member-3-dept" class="form-control" required>
                                        <option value="">Select Department</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="member-3">Student</label>
                                    <select id="member-3" class="form-control" required disabled>
                                        <option value="">Select Student</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Member 4 (Optional) -->
                        <div class="member-group">
                            <h5>Team Member 4 (Optional)</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="member-4-dept">Department</label>
                                    <select id="member-4-dept" class="form-control">
                                        <option value="">Select Department</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="member-4">Student</label>
                                    <select id="member-4" class="form-control" disabled>
                                        <option value="">Select Student</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="team-error" class="error-message hidden"></div>

                    <div class="form-actions">
                        <button type="button" class="btn btn--secondary" onclick="showPage('welcome-page')">Back</button>
                        <button type="submit" class="btn btn--primary">Next: Select Mentors</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Team Registration - Step 2: Mentor Selection -->
        <div id="mentor-selection" class="page">
            <div class="form-container">
                <div class="form-header">
                    <h2>Mentor Selection - Step 2</h2>
                    <div class="progress-bar">
                        <div class="progress-step completed">1</div>
                        <div class="progress-step active">2</div>
                        <div class="progress-step">3</div>
                    </div>
                    <p>Rank your mentor preferences (1st to 4th choice)</p>
                </div>
                
                <form id="mentor-selection-form">
                    <div class="form-group">
                        <label class="form-label" for="mentor-1">First Preference Mentor *</label>
                        <select id="mentor-1" class="form-control" required>
                            <option value="">Select First Choice</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="mentor-2">Second Preference Mentor *</label>
                        <select id="mentor-2" class="form-control" required>
                            <option value="">Select Second Choice</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="mentor-3">Third Preference Mentor *</label>
                        <select id="mentor-3" class="form-control" required>
                            <option value="">Select Third Choice</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="mentor-4">Fourth Preference Mentor *</label>
                        <select id="mentor-4" class="form-control" required>
                            <option value="">Select Fourth Choice</option>
                        </select>
                    </div>

                    <div id="mentor-error" class="error-message hidden"></div>

                    <div class="form-actions">
                        <button type="button" class="btn btn--secondary" onclick="showPage('team-registration')">Back</button>
                        <button type="submit" class="btn btn--primary">Next: Project Ideas</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Team Registration - Step 3: Project Ideas -->
        <div id="project-ideas" class="page">
            <div class="form-container">
                <div class="form-header">
                    <h2>Project Ideas - Step 3</h2>
                    <div class="progress-bar">
                        <div class="progress-step completed">1</div>
                        <div class="progress-step completed">2</div>
                        <div class="progress-step active">3</div>
                    </div>
                    <p>Provide three project ideas for your capstone project</p>
                </div>
                
                <form id="project-ideas-form">
                    <div class="form-group">
                        <label class="form-label" for="idea-1">Project Idea 1 *</label>
                        <textarea id="idea-1" class="form-control" rows="4" required maxlength="500"
                                  placeholder="Describe your first project idea in detail..."></textarea>
                        <div class="char-counter" id="idea-1-counter">0/500 characters</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="idea-2">Project Idea 2 *</label>
                        <textarea id="idea-2" class="form-control" rows="4" required maxlength="500"
                                  placeholder="Describe your second project idea in detail..."></textarea>
                        <div class="char-counter" id="idea-2-counter">0/500 characters</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="idea-3">Project Idea 3 *</label>
                        <textarea id="idea-3" class="form-control" rows="4" required maxlength="500"
                                  placeholder="Describe your third project idea in detail..."></textarea>
                        <div class="char-counter" id="idea-3-counter">0/500 characters</div>
                    </div>

                    <div id="ideas-error" class="error-message hidden"></div>

                    <div class="form-actions">
                        <button type="button" class="btn btn--secondary" onclick="showPage('mentor-selection')">Back</button>
                        <button type="submit" class="btn btn--primary">Submit Team Registration</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Admin Login -->
        <div id="admin-login" class="page">
            <div class="form-container">
                <div class="form-header">
                    <h2>Administrator Login</h2>
                    <p>Access the administration panel</p>
                </div>
                
                <form id="admin-login-form">
                    <div class="form-group">
                        <label class="form-label" for="username">Username</label>
                        <input type="text" id="username" class="form-control" required 
                               placeholder="Enter your username">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="password">Password</label>
                        <input type="password" id="password" class="form-control" required 
                               placeholder="Enter your password">
                    </div>

                    <div id="login-error" class="error-message hidden"></div>

                    <div class="form-actions">
                        <button type="button" class="btn btn--secondary" onclick="showPage('welcome-page')">Back</button>
                        <button type="submit" class="btn btn--primary">Login</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="page">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Administrator Dashboard</h2>
                    <button class="btn btn--secondary" onclick="logout()">Logout</button>
                </div>
                
                <div class="dashboard-options">
                    <div class="card" onclick="showPage('view-teams')">
                        <div class="card__body">
                            <h3>View Teams</h3>
                            <p>View all registered teams, export data, and check unregistered students</p>
                        </div>
                    </div>
                    <div class="card" onclick="showPage('mentor-panel')">
                        <div class="card__body">
                            <h3>Mentor Panel</h3>
                            <p>Select mentor identity and manage team selections</p>
                        </div>
                    </div>
                    <div class="card" onclick="showPage('team-management')">
                        <div class="card__body">
                            <h3>Team Management</h3>
                            <p>Delete teams and manage registrations</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- View Teams -->
        <div id="view-teams" class="page">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Registered Teams</h2>
                    <div class="dashboard-actions">
                        <button class="btn btn--primary" onclick="exportTeamsToCSV()">Export Teams (CSV)</button>
                        <button class="btn btn--secondary" onclick="showPage('admin-dashboard')">Back to Dashboard</button>
                    </div>
                </div>
                
                <div id="teams-display" class="teams-section">
                    <div id="teams-list"></div>
                </div>

                <div id="remaining-students" class="remaining-students-section">
                    <h3>Unregistered Students</h3>
                    <p>Students not assigned to any team, organized by department</p>
                    <div id="remaining-students-display"></div>
                </div>
            </div>
        </div>

        <!-- Team Management (Delete Function) -->
        <div id="team-management" class="page">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Team Management</h2>
                    <div class="dashboard-actions">
                        <button class="btn btn--danger" onclick="deleteAllTeams()">Delete All Teams</button>
                        <button class="btn btn--secondary" onclick="showPage('admin-dashboard')">Back to Dashboard</button>
                    </div>
                </div>
                
                <div class="team-management-section">
                    <h3>Registered Teams</h3>
                    <p>Click on a team to view details or delete individual teams</p>
                    <div id="teams-management-list" class="teams-management-grid"></div>
                </div>
            </div>
        </div>

        <!-- Mentor Panel -->
        <div id="mentor-panel" class="page">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Mentor Panel</h2>
                    <div class="dashboard-actions">
                        <button class="btn btn--primary" onclick="exportMentorSelectionsToCSV()">Export Selections (CSV)</button>
                        <button class="btn btn--secondary" onclick="showPage('admin-dashboard')">Back to Dashboard</button>
                    </div>
                </div>
                
                <div class="mentor-selector-section">
                    <div class="form-group">
                        <label class="form-label" for="mentor-selector">Select Your Mentor Profile</label>
                        <select id="mentor-selector" class="form-control">
                            <option value="">Choose your mentor profile</option>
                        </select>
                    </div>
                </div>

                <div id="mentor-teams-display" class="mentor-teams-section hidden">
                    <div class="mentor-header">
                        <h3 id="mentor-name-display"></h3>
                        <div class="mentor-capacity">
                            <span class="status status--info">Maximum 4 teams per mentor</span>
                        </div>
                    </div>
                    
                    <div id="preference-stats" class="preference-stats"></div>
                    <div id="team-selection" class="team-selection"></div>
                </div>
            </div>
        </div>

        <!-- Success Message -->
        <div id="success-page" class="page">
            <div class="success-container">
                <div class="success-message">
                    <div class="success-icon">✓</div>
                    <h2>Registration Successful!</h2>
                    <p>Your team has been registered successfully. You will be notified about mentor assignment soon.</p>
                    <div class="success-details">
                        <p><strong>What's next?</strong></p>
                        <ul>
                            <li>Mentors will review all team applications</li>
                            <li>You'll receive confirmation of your assigned mentor</li>
                            <li>Project development will begin with your mentor's guidance</li>
                        </ul>
                    </div>
                    <button class="btn btn--primary" onclick="showPage('welcome-page')">Back to Home</button>
                </div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
